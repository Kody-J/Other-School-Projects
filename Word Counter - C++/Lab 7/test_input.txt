****  The Pet Shop Sketch						   ****
****  From "And Now For Something Completely Different" 		   ****
****  Transcribed from memory by Bret "<your advertisement here>" Shefter  ****
****  ( SHEBREB@YALEVM.BITNET )    3/28/86				   ****
****  and revised by Malcolm "Sleep. Who needs it?" Dickinson		   ****
****  ( CLARINET@YALEVM.BITNET )   4/3/86.				   ****

*** Continued from the MEDOCTOR PYTHON	file.  ***

			       The Pet Shoppe


A customer enters a pet shop.

Customer: 'Ello, I wish to register a complaint.

(The owner does not respond.)

C: 'Ello, Miss?
Owner: What do you mean "miss"?
C: <pause> I'm sorry, I have a cold.  I wish to make a complaint!
O: We're closin' for lunch.
C: Never mind that, my lad.  I wish to complain about this parrot what I
   purchased not half an hour ago from this very boutique.
O: Oh yes, the, uh, the Norwegian Blue...What's,uh...What's wrong with it?
C: I'll tell you what's wrong with it, my lad. 'E's dead, that's what's
   wrong with it!
O: No, no, 'e's uh,...he's resting.
C: Look, matey, I know a dead parrot when I see one, and I'm looking
   at one right now.
O: No no he's not dead, he's, he's restin'!  Remarkable bird, the Norwegian
   Blue, idn'it, ay?  Beautiful plumage!
C: The plumage don't enter into it.  It's stone dead.
O: Nononono, no, no!  'E's resting!
C: All right then, if he's restin', I'll wake him up!
   (shouting at the cage)
   'Ello, Mister Polly Parrot!	I've got a lovely fresh cuttle fish for you if
   you show...(owner hits the cage)
O: There, he moved!
C: No, he didn't, that was you hitting the cage!
O: I never!!
C: Yes, you did!
O: I never, never did anything...
C: (yelling and hitting the cage repeatedly) 'ELLO POLLY!!!!!
   Testing! Testing!  Testing!	Testing!  This is your nine o'clock alarm call!

(Takes parrot out of the cage and thumps its head on the counter.  Throws it up
in the air and watches it plummet to the floor.)

C: Now that's what I call a dead parrot.
O: No, no.....No, 'e's stunned!
C: STUNNED?!?
O: Yeah!  You stunned him, just as he was wakin' up!  Norwegian Blues
   stun easily, major.
C: Um...now look...now look, mate, I've definitely 'ad enough of this.
   That parrot is definitely deceased, and when I purchased it not 'alf an hour
   ago, you assured me that its total lack of movement was due to it bein'
   tired and shagged out following a prolonged squawk.
O: Well, he's...he's, ah...probably pining for the fjords.
C: PININ' for the FJORDS?!?!?!?  What kind of talk is that?, look, why
   did he fall flat on his back the moment I got 'im home?
O: The Norwegian Blue prefers keepin' on it's back!  Remarkable bird, id'nit,
   squire?  Lovely plumage!
C: Look, I took the liberty of examining that parrot when I got it home,
   and I discovered the only reason that it had been sitting on its perch in
   the first place was that it had been NAILED there.

(pause)

O: Well, o'course it was nailed there!	If I hadn't nailed that bird down,
   it would have nuzzled up to those bars, bent 'em apart with its beak, and
   VOOM!  Feeweeweewee!
C: "VOOM"?!?  Mate, this bird wouldn't "voom" if you put four million volts
   through it!	'E's bleedin' demised!
O: No no!  'E's pining!
C: 'E's not pinin'!  'E's passed on!  This parrot is no more!  He has ceased
   to be!  'E's expired and gone to meet 'is maker!  'E's a stiff!  Bereft
   of life, 'e rests in peace!	If you hadn't nailed 'im to the perch 'e'd be
   pushing up the daisies!  'Is metabolic processes are now 'istory!  'E's off
   the twig!  'E's kicked the bucket, 'e's shuffled off 'is mortal coil, run
   down the curtain and joined the bleedin' choir invisibile!!
   THIS IS AN EX-PARROT!!

(pause)

O: Well, I'd better replace it, then.
(he takes a quick peek behind the counter)
O:  Sorry squire, I've had a look 'round the back of the shop, and uh, we're
    right out of parrots.
C: I see.  I see, I get the picture.
O: <pause> I got a slug.

(pause)

C: (sweet as sugar) Pray, does it talk?
O: Nnnnot really.
C: WELL IT'S HARDLY A BLOODY REPLACEMENT, IS IT?!!???!!?
O: Look, if you go to my brother's pet shop in Bolton, he'll replace
   the parrot for you.
C: Bolton, eh? Very well.

The customer leaves.

The customer enters the same pet shop.	The owner is putting on a false
moustache.

C: This is Bolton, is it?
O: (with a fake mustache) No, it's Ipswitch.
C: (looking at the camera) That's inter-city rail for you.

The customer goes to the train station.
He addresses a man standing behind a desk marked "Complaints".

C: I wish to complain, British-Railways Person.
Attendant: I DON'T HAVE TO DO THIS JOB, YOU KNOW!!!
C: I beg your pardon...?
A: I'm a qualified brain surgeon!  I only do this job because I like
   being my own boss!
C: Excuse me, this is irrelevant, isn't it?
A: Yeah, well it's not easy to pad these python files out to 150 lines,
   you know.
C: Well, I wish to complain. I got on the Bolton train and found myself
   deposited here in Ipswitch.
A: No, this is Bolton.
C: (to the camera) The pet shop man's brother was lying!!
A: Can't blame British Rail for that.
C: In that case, I shall return to the pet shop!

He does.

C: I understand this IS Bolton.
O: (still with the fake mustache) Yes?
C: You told me it was Ipswitch!
O: ...It was a pun.
C: (pause) A PUN?!?
O: No, no...not a pun...What's that thing that spells the same backwards
   as forwards?
C: (Long pause)  A palindrome...?
O: Yeah, that's it!
C: It's not a palindrome! The palindrome of "Bolton" would be "Notlob"!!
   It don't work!!
O: Well, what do you want?
C: I'm not prepared to pursue my line of inquiry any longer as I think
   this is getting too silly!

Sergeant-Major: Quite agree, quite agree, too silly, far too silly...
		(takes customer by the arm) Come on, you, you've got to go
		do another sketch now!	Come on...  (he walks off stage left,
		followed by the director and cameramen, leaving the owner alone
		on the set)

O: (to the audience)  Well!  I never wanted to do this in the first place.
		      I wanted to be...

		      A LUMBERJACK!

		      (he takes off his white lab coat to reveal a checkered
		      shirt and suspenders under it)

		      Floating down the mighty rivers of British Columbia!
		      With my best girl by my side!   etc. etc. etc.
		      ( continued in LUMBERJK PYTHON )


************************  Alternative Ending: **************************

C: Pray, does it talk?
O: Nnnnot really.
C: WELL IT'S HARDLY A BLOODY REPLACEMENT, IS IT?!!???!!?
O: N-no, I guess not.  (gets ashamed, looks at his feet)
C: Well.

(pause)

O: (quietly)  D'you....     d'you want to come back to my place?
C: (looks around) Yeah, all right, sure.


***  end of file PETSHOP PYTHON  **




                     It's a Ad, Ad, Ad, Ad World

     The average American consumer is bombarded with hundreds of
commercial messages a day, and some experts claim that the average
child sees and hears 100,000 pitches before being old enough to
attend school.  Sometimes it seems that, in these messages, both
the sponsors and the advertising agencies have abandoned the
struggle to communicate clearly, washing their hands of sense and
meaning.

On a paper placemat in a Massachusetts restaurant appeared this
advertising atrocity:

                       NEWBURY STREET COIFFURE
                              AFFORDABLE
                   An Alternative to Looking Good.

     After tittering and scratching our heads for a while, we can
reconstruct what happened in the framing of this cacphonous come-on.
Apparently, the good folks at Newbury Street Coiffure meant to proclaim
that their affordable prices afforded an alternative for looking good.
But what came out was the message, "Come to us and we'll throw gunk on
your hair and pull some of it out.  And we'll charge you very little to
do it!"

As the following classified classics will demonstrate, there are often
more laughs on the advertising and classified pages than you can find
in the cartoon and comic strips:

*  Saturday Morning 10:30 A.M. Easter Matinee.  Every child laying an
egg in the door man's hand will be admitted free.   [Parsons PA paper]

*  We want your eggs, and we want them bad. Porter & Young   [Display
ad in the Le Roy MN Indepentent.

*  LET'S ALL MAKE THIS A BIGGER AND BETTER STATE FAIR.  Leave your
garments at our main plant right on your way to the fair.   [Ad in
the Shreveport LA Journal]

*  Widows made to order.  Send us your specifications  [El Paso TX]

*  The fact that those we have served return once again, and recommend
us to their friends, is a high indorsment of the service we
render. PELTON FUNERAL HOME   [Oshkosh Northwestern]

TOMBSTONE SLIGHTLY USED.  Sell cheap.  Weil's Curiosity Shop
[Philadelphia Inquirer]

*  Will trade fire, life, automobile insurance for anything can use.
Want lady with automobile.  [Riverside CA Enterprise]

*  For sale to kind master.  Full grown domesticated tigress, goes
daily walk untied, and eats flesh from hand.  [Calcutta India]

*  WANTED A boy who can take care of horses who can speak German.
[Parade of Youth]

*  Swap - Drink mixer, glasses, tray, etc for good baby carriage.
[Ossining paper]

*  Lost:  small apricot poodle.  reward. Neutered.  Like one of the
family.

*  A superb and inexpensive restaurant.  Fine foods expertly served by
waitresses in apetizing forms.

*  Dinner Special - Turkey $2.35; Chicken or Beef $2.25; Children $2.00

*  For sale:  antique desk suitable for lady with thick legs and large
drawers.

*  For sale:  a quilted high chair that can be made into a table,
pottie chair, rocking horse, refrigerator, spring coat, size 8 and fur
collar.

*  Four-poster bed, 101 years old.  Perfect for antique lover.

*  Now is the perfect time to get your ears pierced and get an extra
pair to take home, too!

*  Wanted:   50 girls for stripping machine operators in factory

*  Wanted:  Unmarried girls to pick fresh fruit and produce at night.

*  We do not tear your clothing with machinery.  We do it carefully by
hand.

*  No matter what your topcoat is made of, this miracle spray will make
it really repellent

*  For Sale.  Three canaries of undetermined sex.

*  For Sale - Eight puppies from a German Shepherd and an Alaskan
Huskey.

*  Creative daily specials, including select offerings of beef, foul,
fresh vegetables, salads, quiche.

*  7 ounces of choice sirloin, steak, boiled to your likeness and
smothered with golden fried onion rings.

*  Great Dames for sale.

*  Have several very old dresses from grandmother in beautiful
condition.

*  Tired of cleaning yourself?  Let me do it.

*  20 dozen bottles of excellent Old Tawney Port, sold to pay for
charges, the opwner having been lost sight of, and bottled by us last
year.

*  Dog for sale:  eats anything and is fond of children.

*  Vacation Special:  Have your house exterminated.

*  If you think you've seen everything in Paris, visit the Pere
Lachasis Cemetery.  It boasts such immortals as Moliere, Jean de la
Fountain and Chopin.

*  Mt. Kilimanjaro, the breathtaking backdrop for the Serena Lodge.
Swim in the lovely pool while you drink it all in.

*  The hotel has bowling alleys, tennis courts, comfortable beds and
other athletic facilities.

*  Get rid of aunts:  Zap does the job in 24 hours.

*  Toaster:  A fift that every member of the family appreciates.
Automatically burns toast.

*  Sheer stockings.  Designed for fancy dress, but so servicable that
lots of women wear nothing else.

*  Save regularly in our bank.  You'll never reget it.

*  We build bodies that last a lifetime.

*  Offer expires December 31 or while supplies last.

*  This is the model home for your future.  It was panned by Better
Homes & Gardens.

*  For Sale - Diamonds $20,00; microsopes $15.00.

*  For Rent:  6 room hated apartment.

*  Man, honest.  Will take anything.

*  Wanted:  chambermaid in rectory.  Love in, $200.00 a month.
References required.

*  Wanted:  Part-time married girls for soda fountain in sandwich shop.

*  Man wanted to work in dynamite factory.  Must be willing to travel.

*  Used Cars:  Why go elsewhere to be cheated?  Come here first!

*  Christmas tag-sale.  Handmade gifts for the hard-to-find person.

*  Modular Sofas.  Only $299.00.  For rest or fore play.

*  Wanted:  Hair-cutter.  Excellent growth potential.

*  Wanted.  Man to take care of cow that does not smoke or drink.

*  3-year old teacher needed for pre-school.  Experience preferred.

*  Our experienced Mom will care for your child.  Fenced yard, meals
and snacks included.

*  Our bikinis are exciting.  They are simply the tops.

*  Auto Repair Service.  Free pick-up and delivery.  Try us once,
you'll never go anywhere again.

*  See ladies blouses.  50% off!

*  Holcross pulletts.  Starting to lay Betty Clayton, Granite 5-6204

*  Wanted.  Preparer of food.  Must be dependable like the food
business, and be willing to get hands dirty.

*  Illiterate?  Write today for free help.

*  Girl wanted to assist magician in cutting-off-head illusion.
Blue Cross and salary.

*  Wanted.  Widower with school-age children requires person to assume
general housekeeping duties.  Must be capable of contributing to growth
of family.

*  Mixing bowl set designed to please a cook with round bottom for
efficient beating

*  Mother's helper - peasant working conditions.

*  Semi-Annual after Christmas Sale.

*  And now, the Superstore - unequaled in size, unmatched in variety,
unrivaled inconvenience.

*  We will oil your sewing machine and adjust tension in your home
for $1.00

And these beauties from the radio:

*  Ladies and gentlemen, now you can have a bikini for a rediculous
figure.

*  Be with us again next Saturday at 10:00 P. M. for "High Fidelity,"
designed to help music lovers increase their reproduction.

*  When you are thirsty, try 7-Up, the refreshing drink in the green
bottle with the big 7 on it and u-p after.

*  Tune in next week for another series of classical music programs
with the Canadian Broadcorping Castration.


Some memorable headlines

JURY GETS DRUNK
DRIVING CASE HERE

MAN IS FATALY SLAIN

NIGHT SCHOOL TO
HEAR PEST TALK

PRISONERS ESCAPE
FROM PRISON FARM
AFTER EXECUTION

SUES BRIDE OF 4 MOUTHS

          HOTEL BURNS.
TWO HUNDRED GUESTS ESCAPE HALF GLAD

INFANT MORALITY
SHOWS DROP HERE

SANTA ROSA MAN DENIES
HE COMMITED SUICIDE IN
SOUTH SAN FRANCISCO

ENRAGED COW INJURES
FARMER WITH AX

SENAT PASSES DEATH PENALTY
Measure provides for Electrocution for
all persons over 17.

Thugs eat then
rob proprieter

Scent foul play in death
of man found bound and hanged

Dog in bed, asks divorce

WILD WIFE LEAGUE
WILL MEET TONIGHT

BOY COOKS MUST
EAT OWN VITALS

BACHELORS PREFER BEAUTY
TO BRAINS IN THEIR WIVES

LOCAL MAN HAS
LONGEST HORNS IN ALL TEXAS

OFFICER CONVICTED OF
ACCEPTING BRIDE

40 MEN ESCAPE WATERY GRAVES
WHEN VESSEL FLOUNDERS IN ALE





This article was published as:

"Game Size: The Forgotten Discipline"
 PC Techniques, Vol. 6, no 3
 Aug/Sept. 1995, page 93.

What appears here is the original manuscript, as submitted to Jeff
Duntemann. Any changes in the published version are due to Jeff's
expert editing.


                        Writing Smaller Games
                     copyright 1995 Diana Gruber

At a recent conference, I ran into a user of a shareware game who
was complaining that the game wouldn't run on his ancient 80286
computer. It was running too fast. The program, apparently, was
written years earlier to run on an XT, and performed badly on
anything faster. He was wondering if I had any suggestions on how
to fix it. I didn't, but I took the opportunity to recall the good
old days of game programming, when developers knew how to get the
most out of those old, primitive systems.

The thing that sticks in my mind the most about the early days
of game programming was how much attention we paid to the size
of a game. These days, all the emphasis is on speed. If a game
fits on ten floppy disks or a CD-ROM, it isn't a problem. We
can afford to be wasteful where size is concerned, as long as
we have adequate speed.

Do you remember when floppy disks were so expensive that games
had to fit single 360K disk? Disk space wasn't the only problem
back then. You couldn't count on a system having 640K bytes of
memory, or even 512K. To reach the widest audience, a game
had to run in 256K or less.

Programming to those types of minimal configurations is becoming
a lost art. Game programmers who remember how it was done still
have the necessary skills. We remember how to optimize for size.
But you don't see much written on the subject, because it is
no longer an issue like it used to be. Still, there is no reason
to be sloppy. Wasted space is wasted space. Even if you don't
need to optimize for size, it still pays to know how to do it.
And there are still occasions where optimizing for size is
important, for example when writing code for an embedded system
or an EPROM.

With this in mind, I am offering the following list of suggestions
for optimizing games for size.

Use C, not C++

C++ is a powerful language. While you can use it without a speed
degradation, you will most likely notice an increase in the size
of your program. When optimizing for size, use C, stripped down
to the bare minimum. Also, compare compilers. Some compilers
generate smaller code than others.

Check your compiler switches

Most compilers give you a choice between optimizing for speed and
optimizing for size. Choose optimizing for size, and be sure to
turn off the debugging information. Keep an eye on things like
stack size and heap size, and adjust as appropriate.

Be careful with overlays

The big problem with overlays is the number of disk accesses they can
generate. If these are not planned carefully, your program will
access the hard disk constantly, causing your program to run very
slowly. However, if used correctly, overlays can be a wonderful way
to keep a game running when RAM is low.

Use the medium memory model if possible

You want your data to default to near memory. You can fit a lot
of data in a 64K segment, especially if you make heavy use of globals
and reuseable arrays. If Windows Write can be written in medium
model, so can your game. The small model is also good, but it is usually
not practical to fit both code and data into 64K segments.

Use the smallest integral type

Don't use long integers when short integers will do. Don't use short
integers when bytes will do. This isn't terribly important where
individual variables are concerned, but pay careful attention to your
arrays.

Use globals

These days, programmers are taught to avoid globals for stylistic
reasons. However, they can actually be quite efficient, both in
terms of speed and size. There is a time and a place for everything.
If you are writing a program for a bank that 20 other programmers
are going to work on, you should avoid using globals. If you are
writing a game and you want to squeeze every drop of performance
out of it, use them liberally.

Use malloc() and free()

This is obvious. When an object, such as a bitmap or a sound effect,
is no longer in use, its space should be available for some other
object to use. A variation on this is to allocate all the free memory
at the beginning of your program, and control the use of it yourself.
Programmers often write functions called my_malloc() and my_free()
which simply keep track of pointers to this block of memory. However
you choose to manage memory, be careful about fragmenting it.

Reuseable arrays

Allocate an array of a few thousand bytes and use it over and over.
Temporary bitmaps, such as menu art, can go in there, along with
sound effects, masking maps, or whatever else comes and goes
frequently.

Write lots of small functions

Any time you do something more than twice, write another function
to handle it. The overhead of using many function calls can be
offset by the liberal use of global variables.

Don't use inline functions

Inline functions are the way to squeeze more speed out of a C++
program. In some cases, class functions default to inline. This
adds size to your program, because every occurrence of the function
call is expanded to the whole function at compile time.

Use macros sparingly

Do this for the same reason you avoid using inline functions. The
macro substitution happens at compile time, adding size to your
executable program. Don't avoid macros altogether, though. They can
greatly simplify your code, and add a speed boost as well. Just
be careful how you use them.

Don't use unrolled loops

Unrolled loops are a speed optimization, at the expense of program
size. If size is a concern, roll them back up. A compromise solution
is to use partial unrolling. For example, you can execute a
1000-iteration loop 500 times but include the code twice within the
loop.

Don't use compiled bitmaps

Compiled bitmaps are all the rage these days. Bitmap data is turned
into assembly language instructions. They are blazingly fast, but
add massive size overhead to the size of your program.

Use itoa() instead of sprintf()

There are very few times when you want formatted text output in a
game. Usually the score will contain integers, and maybe some
inventory or map coordinates also involve numbers. The sprintf()
function does a nice job of converting numbers to text, but it
also does a lot more. The unneeded code adds to the size of your
program. If possible, avoid it and use itoa(). Similarly, use atoi()
instead of sscanf().

Don't use floating point

This is a universal truth in games, and programmers will go to great
lengths to avoid floating point math, including writing their own
"fixed point" functions, which are integer simmulations of real number
functions. In general, integer solutions can be found to most
game design problems, usually without resorting to fixed point.
For example, to turn clock ticks into seconds, you need to multiply
by 18.2. This can be accomplished by multiplying by 182 and dividing
by 10.

Rewrite the startup code

While I have never done this, some game programmers do it routinely.
The function c0.asm can be optimized by stripping out the code you
don't need.

Compress your executable

There is a freeware program called LZEXE which allows you to store
your executable in a compressed format which is decompressed at load
time. This saves disk space, but not RAM. The program will expand
to fill up the same amount of RAM it required before the compression.
There are also commercial programs that do the same job.

Use repetitive music and brief sound effects

Music and sound effects will eat up huge chunks of space. Plan these
carefully. Trim them down to the bare minimum, and store them in
RAM in reuseable arrays.

Turn little files into big files

Files are stored on disks in allocation units. Typically, DOS will
alocate a unit of two 512-byte sectors on a floppy disk, or four
sectors on a hard disk. A tiny file will fill the entire allocation
unit, even if it is only a few bytes long. The rest of the
allocation unit is simply unused space. On average, 512 bytes of space is
wasted for each file on a floppy disk. That means if you have 10
files on a floppy disk, you have approximately 5K of wasted space. So
if you can combine your bitmaps or sound effects into larger binary
files, you will achieve a significant savings in disk space.

Use reuseable artwork

If your title screen and your credit screen use the same artwork, but
perhaps arranged differently, you can store it in a single file and
organize it at run time. If your title screen uses artwork from the
game, so much the better. Recycle those files as much as possible.

Strip the palette information out of PCX files

If you use the same color palette throughout the game, then you
don't need to store that information in a PCX file. The 256-color PCX
files have 768 bytes at the end which hold the palette information.
You can trim that off. If you have 10 PCX files all using the same
palette, this will save you more than 7K.

Use RLE bitmaps

Run Length Encoding (RLE) is a simple technique for compressing
bitmaps. It simply records the color, then the number of pixels of
that color, in a continuous pattern starting at one corner. Depending
on the artwork, this can save you considerable space both both in
terms of disk space and RAM. RLE's are also very efficient in terms
of speed. They can be displayed faster than an uncompressed bitmap,
but not as fast as a compiled bitmap.

Don't store text as graphics

If you have a page of text, for example opening credits or a storyline,
store it as character strings and display it using a bitmapped font.
Don't store it in a PCX file, which would be very wasteful.

Split your sprites

If you have two sprites that are almost identical, break them up.
For example, if you have a man with his hands up, and the same man
with his hands down, make the man one sprite, and the hands another
sprite. This will save quite a bit of sprite storage room, but
it causes a slight speed degradation (you turn one blit into two blits)
and it is also time-consuming and annoying to manipulate the artwork
that way. If you are at the end of the development cycle, and you
just need to squeeze a few more bytes out of your program, this is
a good place to do it.

As you can see, many of these tips are exactly the opposite of what
you would do if you were optimizing for speed. In actual practice,
game programmers tend to weigh their options and make decisions based
on both size and speed. These days, the equation is skewed heavily
toward speed, with size being a trivial factor in development
decisions. Still, it pays to know what you are trading away when you
make your tradeoff decisions. A good programmer will keep both size
and speed considerations in mind when designing and developing games.
